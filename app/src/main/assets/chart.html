<!DOCTYPE html>
<head>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/modules/data.js"></script>
    <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/stock/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/stock/indicators/indicators.js"></script>
    <script src="https://code.highcharts.com/stock/indicators/vwap.js"></script>
</head>
    <body>
    <div id="chart" class="chart"></div>
    </body>
    <script>
       
        $(document).ready(function(){
            function loadGraph(data){
        var ohlc = [];
        var volume = [];
      for(var i = 0; i < data.length; i++){
        ohlc.push([
          data[i][0],
          data[i][1], // open
            data[i][2], // high
            data[i][3], // low
            data[i][4] // 
        ]);
        volume.push([
          data[i][0],
          data[i][5]
        ])
      }
      Highcharts.stockChart('chart', {
        chart: {
            scrollablePlotArea: {
              minWidth: 10
            }
        },
        navigator: {
          enabled:true
        },
        plotOptions:{
          series: {
            showInNavigator: true
          }
        },
        rangeSelector: {
          enabled: true,
          selected: 1
        },
        title: {
          text: 'Historical'
        },
        subtitle: {
          text: 'with SMA and volume by price technical indicators' 
        },
        xAxis: {
          type: 'datetime'
        },
        yAxis: [{
          startOnTick: false,
          endOnTick: false,
          labels: {
              align: 'right',
              x: -3
          },
          title: {
              text: 'OHLC'
          },
          height: '60%',
          lineWidth: 2,
          resize: {
              enabled: true
          }
      }, {
          labels: {
              align: 'right',
              x: -3
          },
          title: {
              text: 'Volume'
          },
          top: '65%',
          height: '35%',
          offset: 0,
          lineWidth: 2
      }],
      tooltip: {
        split: true
    },
    series: [{
      type: 'candlestick',
      name: stock,
      id: 'ticker',
      zIndex: 2,
      data: ohlc
  }, {
      type: 'column',
      name: 'Volume',
      id: 'volume',
      data: volume,
      yAxis: 1
  }, {
      type: 'vbp',
      linkedTo: 'ticker',
      params: {
          volumeSeriesID: 'volume'
      },
      dataLabels: {
          enabled: false
      },
      zoneLines: {
          enabled: false
      }
  }, {
      type: 'sma',
      linkedTo: 'ticker',
      zIndex: 1,
      marker: {
          enabled: false
      }
  }]
      });

    }
        })

    function getParameters(query) {
        var parts = query.split('&');
        var params = {};
        for (var i = 0, ii = parts.length; i < ii; ++i) {
            var param = parts[i].split('=');
            var key = param[0];
            var value = param.length > 1 ? param[1] : null;
            params[decodeURIComponent(key)] = decodeURIComponent(value);
        }
        return params;
    }
    document.addEventListener("load", function() {
    console.log('here')
    var params = getParameters(document.location.search.substring(1));
    if(params.hasOwnProperty('response')) {
       console.log(params['response']);
    }
    });
    
    </script>
</html>